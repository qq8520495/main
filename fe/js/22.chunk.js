(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addMenuPermission=t.remove=t.update=t.add=t.allList=t.list=void 0;var a,u=n(104),o=(a=u)&&a.__esModule?a:{default:a};t.list=function(e){return o.default.get("/admin/role/list",{params:e})},t.allList=function(e){return o.default.get("/admin/role/all-list",{params:e})},t.add=function(e){return o.default.post("/admin/role/save",e)},t.update=function(e){return o.default.post("/admin/role/update",e)},t.remove=function(e){return o.default.post("/admin/role/delete/"+e.id)},t.addMenuPermission=function(e){return o.default.post("/admin/role/add-menu-permission",e)}},458:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(66)),u=f(n(622)),o=f(n(32)),d=f(n(56)),i=f(n(51));n(64),n(619),n(46),n(65);var l=n(0),r=f(l),s=n(251),c=n(249);function f(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.visible,n=e.roleId,f=e.changeVisiable,p=(0,l.useState)([]),h=(0,i.default)(p,2),m=h[0],v=h[1],y=(0,l.useState)([]),k=(0,i.default)(y,2),E=k[0],P=k[1],g=(0,l.useState)([]),M=(0,i.default)(g,2),b=M[0],w=M[1],_=(0,l.useState)(!1),I=(0,i.default)(_,2),S=I[0],x=I[1],L=(0,l.useState)(!1),C=(0,i.default)(L,2),j=C[0],H=C[1];(0,l.useEffect)((function(){H(t),t&&(J(),K())}),[t,n]);var J=function(){(0,s.getMenuAllList)({parentId:0}).then((function(e){w(e.data);var t=[];e.data.forEach((function(e){var n=[];for(n.push(e);0!==n.length;){var a=n.pop();t.push(a.id),a.children&&0!==a.children.length&&a.children.forEach((function(e){n.push(e)}))}})),P(t)})).catch((function(e){console.error(e)}))},K=function(){(0,s.getRoleMenu)({roleId:n}).then((function(e){v(e.data)})).catch((function(e){console.error(e)}))};return r.default.createElement("div",{className:"sysRole-contain",key:"sP5511"},r.default.createElement(a.default,{title:"权限",visible:j,width:600,onCancel:function(){f(!1)},footer:r.default.createElement("div",{key:"sP5512"},r.default.createElement(o.default,{type:"primary",loading:S,onClick:function(){x(!0),(0,c.addMenuPermission)({roleId:n,menuIdList:m}).then((function(e){x(!1),d.default.success({message:"权限变更成功"}),f(!1)})).catch((function(e){x(!1),console.error(e)}))},key:"sP5531"},"确定")),key:"sP5521"},r.default.createElement("div",{style:{minHeight:400,maxHeight:500,overflow:"auto"},key:"sP5513"},r.default.createElement(u.default,{checkable:!0,onExpand:function(e){P(e)},expandedKeys:E,autoExpandParent:!0,checkedKeys:m,onCheck:function(e,t){var n=[];t.checkedNodes.forEach((function(e){e.id&&n.push(e.key)})),v(n)},treeData:b,key:"sP5541"}))))}}}]);