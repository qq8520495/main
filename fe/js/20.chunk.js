(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{185:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteUserPermission=t.addUserPermission=t.permissionUserList=t.remove=t.update=t.add=t.allList=t.info=t.list=void 0;var l,n=a(104),u=(l=n)&&l.__esModule?l:{default:l};t.list=function(e){return u.default.get("/admin/contract-template/list",{params:e})},t.info=function(e){return u.default.get("/admin/contract-template/"+e)},t.allList=function(e){return u.default.get("/admin/contract-template/all-list",{params:e})},t.add=function(e){return u.default.post("/admin/contract-template/save",e)},t.update=function(e){return u.default.post("/admin/contract-template/update",e)},t.remove=function(e){return u.default.post("/admin/contract-template/delete/"+e.id)},t.permissionUserList=function(e){return u.default.get("/admin/contract-template/permission/"+e.templateId,{params:e})},t.addUserPermission=function(e){return u.default.post("/admin/contract-template/permission/",e)},t.deleteUserPermission=function(e){return u.default.post("/admin/contract-template/delete-permission",e)}},691:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=y(a(464)),n=y(a(32)),u=y(a(73)),f=y(a(60)),d=y(a(56)),r=y(a(55)),i=y(a(51));a(465),a(46),a(72),a(59),a(65);var c=a(0),o=y(c),m=a(185),s=a(130),p=y(a(674));function y(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.location,a=(e.match,e.history),y=(0,c.useRef)(null),g=(0,c.useRef)(null),k=(0,c.useState)(!1),E=(0,i.default)(k,2),I=E[0],v=E[1],h=(0,c.useState)({favicon:"",topImage:"",sealImage:"",content:""}),b=(0,i.default)(h,2),_=b[0],F=b[1];(0,c.useEffect)((function(){t.query&&t.query.id?(0,m.info)(t.query.id).then((function(e){F({favicon:e.data.favicon,topImage:e.data.topImage,sealImage:e.data.sealImage}),y.current.setFieldsValue((0,r.default)({},e.data)),g.current.txt.html(e.data.content)})):(F({favicon:"",topImage:"",sealImage:""}),y.current.setFieldsValue({id:null}),g.current&&g.current.txt.html(""))}),[t]),(0,c.useEffect)((function(){g.current=new p.default("#editor"),g.current.config.height=600,g.current.create()}),[]);var U=(0,c.useState)(!1),w=(0,i.default)(U,2),x=w[0],C=w[1],L=(0,c.useState)(!1),M=(0,i.default)(L,2),P=M[0],q=M[1],O=(0,c.useState)(!1),S=(0,i.default)(O,2),N=S[0],R=S[1];return o.default.createElement("div",{className:"contractTemplate-contain",key:"unf411"},o.default.createElement(u.default,{ref:y,labelCol:{span:4},wrapperCol:{span:16},key:"unf421"},o.default.createElement(u.default.Item,{label:"模板名称",name:"name",rules:[{required:!0,message:"必填"}],hasFeedback:!0,key:"unf431"},o.default.createElement(f.default,{key:"unf441"})),o.default.createElement(u.default.Item,{label:"模板标题",name:"title",rules:[{required:!0,message:"必填"}],hasFeedback:!0,key:"unf432"},o.default.createElement(f.default,{key:"unf442"})),o.default.createElement(u.default.Item,{label:"favicon图片",key:"unf433"},o.default.createElement(l.default,{showUploadList:!1,data:{directory:"/contract_template_image"},action:"/file/uploadFeFile",onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(F((0,r.default)({},_,{favicon:e.file.response.data})),C(!1),console.log(e.file.response.data)):C(!0)},key:"unf451"},o.default.createElement(n.default,{icon:o.default.createElement(s.UploadOutlined,{key:"unf471"}),loading:x,key:"unf461"},"点击上传")),o.default.createElement("div",{style:{marginTop:10},key:"unf412"},_.favicon?o.default.createElement("img",{src:_.favicon,alt:"avatar",style:{maxHeight:100},key:"unf481"}):null)),o.default.createElement(u.default.Item,{label:"顶部图片",key:"unf434"},o.default.createElement(l.default,{showUploadList:!1,data:{directory:"/contract_template_image"},action:"/file/uploadFeFile",onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(F((0,r.default)({},_,{topImage:e.file.response.data})),q(!1),console.log(e.file.response.data)):q(!0)},key:"unf452"},o.default.createElement(n.default,{icon:o.default.createElement(s.UploadOutlined,{key:"unf472"}),loading:P,key:"unf462"},"点击上传")),o.default.createElement("div",{style:{marginTop:10},key:"unf413"},_.topImage?o.default.createElement("img",{src:_.topImage,style:{maxHeight:100},alt:"avatar",key:"unf482"}):null)),o.default.createElement(u.default.Item,{label:"印章图片",key:"unf435"},o.default.createElement(l.default,{showUploadList:!1,data:{directory:"/contract_template_image"},action:"/file/uploadFeFile",onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(F((0,r.default)({},_,{sealImage:e.file.response.data})),R(!1),console.log(e.file.response.data)):R(!0)},key:"unf453"},o.default.createElement(n.default,{icon:o.default.createElement(s.UploadOutlined,{key:"unf473"}),loading:N,key:"unf463"},"点击上传")),o.default.createElement("div",{style:{marginTop:10},key:"unf414"},_.sealImage?o.default.createElement("img",{src:_.sealImage,style:{maxHeight:100},key:"unf483"}):null)),o.default.createElement(u.default.Item,{label:"月利率",name:"monthInterestRate",key:"unf436"},o.default.createElement(f.default,{key:"unf443"})),o.default.createElement(u.default.Item,{label:"借款方验证资金",name:"verifyMoney",key:"unf437"},o.default.createElement(f.default,{key:"unf444"})),o.default.createElement(u.default.Item,{label:"还款方式",name:"repaymentMode",key:"unf438"},o.default.createElement(f.default,{key:"unf445"})),o.default.createElement(u.default.Item,{label:"放款方名称",name:"lenderName",key:"unf439"},o.default.createElement(f.default,{key:"unf446"})),o.default.createElement(u.default.Item,{label:"放款方地址",name:"lenderAddr",key:"unf43a"},o.default.createElement(f.default,{key:"unf447"})),o.default.createElement(u.default.Item,{label:"放款方注册号",name:"lenderRegisterNumber",key:"unf43b"},o.default.createElement(f.default,{key:"unf448"})),o.default.createElement(u.default.Item,{label:"放款专员",name:"lenderCommissioner",key:"unf43c"},o.default.createElement(f.default,{key:"unf449"})),o.default.createElement(u.default.Item,{label:"紧急联系人",name:"lenderMobile",key:"unf43d"},o.default.createElement(f.default,{key:"unf44a"})),o.default.createElement(u.default.Item,{label:"法人名称",name:"legalPersonName",key:"unf43e"},o.default.createElement(f.default,{key:"unf44b"})),o.default.createElement(u.default.Item,{label:"贷款期限",name:"deadline",key:"unf43f"},o.default.createElement(f.default,{key:"unf44c"})),o.default.createElement(u.default.Item,{label:"模板内容",key:"unf43g"},o.default.createElement("div",{id:"editor",key:"unf415"}))),o.default.createElement("div",{style:{position:"fixed",right:100,top:"50%"},key:"unf416"},o.default.createElement(n.default,{loading:I,type:"primary",onClick:function(){y.current.validateFields().then((function(e){var t;t=y.current.getFieldValue(),v(!0),t.id?(0,m.update)((0,r.default)({},t,_,{content:g.current.txt.html()})).then((function(e){d.default.success({message:"修改成功",duration:3}),a.push("/system/contract-template")})).finally((function(){v(!1)})):(0,m.add)((0,r.default)({},t,_,{content:g.current.txt.html()})).then((function(e){d.default.success({message:"添加成功",duration:3}),a.push("/system/contract-template")})).finally((function(){v(!1)}))})).catch((function(e){console.log(e)}))},key:"unf464"},"提交")))}}}]);